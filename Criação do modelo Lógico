-------------   modelo lógico oficina
CREATE DATABASE OFICINA;

USE OFICINA;

CREATE TABLE CLIENTE(
  IDCLIENTE INT PRIMARY KEY AUTO_INCREMENT,
  NOME VARCHAR(30),
  TELEFONE VARCHAR(11),
  EMAIL VARCHAR(30)
);


CREATE TABLE AUTOMOVEL(
  IDAUTOMOVEL INT PRIMARY KEY AUTO_INCREMENT,
  ID_CLIENTE INT,
  MODELO VARCHAR(20),
  PLACA VARCHAR(10),
  MARCA VARCHAR(20),
  CONSTRAINT FK_AUTOMOVELCLIENTE FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE (IDCLIENTE)
);

CREATE TABLE TABELA_DE_PRECOS(
  IDTABELA_DE_PRECOS INT PRIMARY KEY AUTO_INCREMENT,
  SERVICO VARCHAR(40),
  VALOR FLOAT(5,2)
);

CREATE TABLE SERVICOS(
  IDSERVICOS INT PRIMARY KEY AUTO_INCREMENT,
  ID_AUTOMOVEL INT,
  ID_TABELA_DE_PRECOS INT,
  TIPO_CONSERTO VARCHAR(40),
  REVISAO VARCHAR(150),
  TROCA_PECA ENUM("NECESSÁRIO", "NÃO NECESSÁRIO"),
  CONSTRAINT FK_SERVICOS_AUTOMOVEL FOREIGN KEY (ID_AUTOMOVEL) REFERENCES AUTOMOVEL (IDAUTOMOVEL),
  CONSTRAINT FK_SERVICOS_TABELA_DE_PRECOS  FOREIGN KEY (ID_TABELA_DE_PRECOS) REFERENCES TABELA_DE_PRECOS (IDTABELA_DE_PRECOS)
);

CREATE TABLE FUNCIONARIO(
  IDFUNCIONARIO INT PRIMARY KEY AUTO_INCREMENT,
  ID_ORDEM_DE_SERVICO INT,
  NOME VARCHAR(30),
  CODIGO INT (4),
  ESPECIALIDADE VARCHAR(30),
  ENDERECO VARCHAR(30),
  CONSTRAINT FK_OS_FUNCIONARIO FOREIGN KEY(ID_ORDEM_DE_SERVICO) REFERENCES OS (IDORDEM_DE_SERVICO)
);


CREATE TABLE OS(
  IDORDEM_DE_SERVICO INT PRIMARY KEY AUTO_INCREMENT,
  ID_SERVICOS INT,
  DATA_EMISSAO DATE,
  DATA_CONCLUSAO DATE,
  STATUS ENUM("CONCLUIDO","ENTREGUE","EM MANUTENÇÃO","EM REVISÃO"),
  NUMERO_OS VARCHAR(20),
  CONSTRAINT FK_OS_SERVICOS FOREIGN KEY (ID_SERVICOS) REFERENCES SERVICOS (IDSERVICOS);
 );
 
 CREATE TABLE EQUIPE_RESPONSAVEL(
  IDEQUIPE_RESPONSAVEL INT PRIMARY KEY AUTO_INCREMENT,
  ID_SERVICOS INT,
  ID_FUNCIONARIO INT,
  ID_ORDEM_DE_SERVICO INT,  
  NOME VARCHAR(30),
  CONSTRAINT FK_EQUIPE_RESPONSAVEL_SERVICO FOREIGN KEY (ID_SERVICOS) REFERENCES SERVICOS (IDSERVICOS),
  CONSTRAINT FK_EQUIPE_RESPONSAVEL_FUNCIONARIO  FOREIGN KEY (ID_FUNCIONARIO) REFERENCES FUNCIONARIO (IDFUNCIONARIO),
  CONSTRAINT FK_SEQUIPE_RESPONSAVEL_OS FOREIGN KEY (ID_ORDEM_DE_SERVICO) REFERENCES OS (IDORDEM_DE_SERVICO) 
);
